jQuery(function(r){r("body").on("click","button.ywrfd-purge-coupon",function(){var e=r(".ywrfd-clear-result"),i={action:"ywrfd_clear_expired_coupons"};e.show(),r(this).hide(),r.post(ywrfd_admin.ajax_url,i,function(r){e.removeClass("clear-progress"),r.success?(e.addClass("clear-success"),e.html(r.message)):(e.addClass("clear-fail"),e.html(r.error))})}),r(document).ready(function(r){if(r("select#ywrfd_trigger").change(function(){var e=r("option:selected",this).val();"review"==e?(r(".ywrfd_review").show(),r(".ywrfd_multiple").hide(),r("#ywrfd_trigger_threshold").prop("required",!1)):(r(".ywrfd_review").hide(),r(".ywrfd_multiple").show(),r("#ywrfd_trigger_threshold").prop("required",!0))}).change(),ywrfd_admin.comment_moderation&&ywrfd_admin.ywar_active){var e=r("#ywar_review_moderation");e.attr("disabled",!0),e.parent().append(" <i>("+ywrfd_admin.comment_moderation_warning+")</i>")}r("#ywrfd_trigger_enable_notify").change(function(){r(this).is(":checked")?(r(".ywrfd_trigger_threshold_notify_field").show(),r(".ywrfd-review-number").change(),r("#ywrfd_trigger_threshold_notify").prop("required",!0)):(r(".ywrfd_trigger_threshold_notify_field").hide(),r("#ywrfd_trigger_threshold_notify").prop("required",!1))}).change(),r(".ywrfd-review-number").change(function(){if(r("#ywrfd_trigger_enable_notify").is(":checked")){var e=""!=r(this).val()?parseInt(r(this).val()):1;if(r(this).is(".ywrfd-target")){var i=r(".ywrfd-notify"),d=r(".ywrfd_multiple"),o={action:"ywrfd_get_minimum_threshold",value:e,post_id:ywrfd_admin.post_id,vendor_id:"0"!=ywrfd_admin.vendor_id?ywrfd_admin.vendor_id:""};if(d.is(".processing"))return!1;d.addClass("processing"),d.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),r.post(ywrfd_admin.ajax_url,o,function(r){r.success?(r.value>e-1?i.prop("min",e>1?e-1:1):(i.prop("min",r.value),i.val()<r.value&&i.val(r.value)),i.prop("max",e>1?e-1:1)):(console.log(r.error),i.prop("min",1),i.prop("max",1)),d.removeClass("processing").unblock()})}else r(this).is(".ywrfd-notify")&&r(".ywrfd-target").prop("min",e+1)}}).change()})});